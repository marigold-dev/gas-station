<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SDKs - book</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="WELCOME.html">Welcome</a></li><li class="chapter-item expanded affix "><a href="WEBAPP.html">Gas Station Webapp</a></li><li class="chapter-item expanded affix "><a href="LIBRARY.html" class="active">SDKs</a></li><li class="chapter-item expanded affix "><a href="API.html">API</a></li><li class="chapter-item expanded affix "><a href="TUTORIAL.html">Tutorial</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="getting-started"><a class="header" href="#getting-started">Getting started</a></h2>
<p>Afin de faciliter l'expérience utilisateur, nous avons developpé deux SDKs (pour le moment) à intégrer dans vos webapps.
Ils permettront d'interagir avec la Gas Station facilement.
Pour le moment nous avons développé un SDK pour Typescript et un SDK pour Unity.</p>
<h3 id="typescript"><a class="header" href="#typescript">Typescript</a></h3>
<h4 id="installation"><a class="header" href="#installation">Installation</a></h4>
<p>Pour installer le SDK Typescript, il faut executer :</p>
<pre><code class="language-bash">npm install --save @marigold-dev/gas-station-lib
</code></pre>
<h4 id="explanations"><a class="header" href="#explanations">Explanations</a></h4>
<p>Le SDK est composé de deux classes : <code>GasStation</code> et <code>PermitContract</code>.</p>
<p>La classe <code>GasStation</code> permet de communiquer facilement avec l'API de la Gas Station, sans avoir à initiliaser soit-même la requete HTTP.</p>
<p>Pour initialiser cette classe, il faut lui donner une URL d'API de Gas Station. Pour le moment, vous pouvez donner <code>https://gas-station-api.marigold.dev/operation</code>.</p>
<p>La classe possède deux méthodes :</p>
<ul>
<li><code>postOperation</code> prend en paramètre un <code>sender</code> (généralement l'adresse de l'utilisateur) et une <code>operation</code> de type</li>
</ul>
<pre><code class="language-ts">export type Operation = {
  destination: string;
  parameters: unknown;
};
</code></pre>
<p>Cette méthode va ensuite préparer la requête HTTP et l'envoyer sur le endpoint <code>/operation</code> de l'API, qui traiter l'operation.</p>
<ul>
<li><code>postOperations</code> prend également un <code>sender</code> et un tableau d' <code>Operation</code> et permet d'envoyer plusieurs opérations à la fois.</li>
</ul>
<p>La classe <code>PermitContract</code> permet de générer un permit <a href="https://tzip.tezosagora.org/proposal/tzip-17">TZIP-17</a> pour un contrat donné.</p>
<blockquote>
<p>Un permis est une autorisation à appeler un endpoint spécifique d'un smart contrat avec un paramètre spécifié pour le compte d'une adresse donnée. Cette autorisation peut éventuellement expirer. Il est notamment utile pour la manipulation de tokens FA lorsque c'est l'utilisateur qui a le ownership (transfer, update_operation, approve)</p>
</blockquote>
<p>Cette classe a deux méthodes :</p>
<ul>
<li><code>generatePermit</code> permet de créer un permis à partir d'une operation de transfert. Elle retourne un objet contenant</li>
</ul>
<pre><code class="language-ts">{
  bytes: string, // les bytes contenant le permis
  transfer_hash: string, // le hash de l'operation de transfet
}
</code></pre>
<p>Suite à l'appel de <code>generatePermit</code>, vous devrez faire signer les bytes par le owner du token pour finaliser le permis.</p>
<ul>
<li><code>permitCall</code> permet d'appeler l'entrypoint <code>permit</code> sur le contrat cible. Cela va permettre d'enregister le permis dans le storage du contrat (cf TZIP-17).
Cette méthode prend en paramètre un objet de type</li>
</ul>
<pre><code class="language-ts">type PermitOperation = {
  publicKey: string;
  signature: string;
  transferHash: string;
};
</code></pre>
<p>et retourne une opération de type <code>TransferParams</code>.</p>
<h4 id="usage"><a class="header" href="#usage">Usage</a></h4>
<p>Pour commencer, il faut importer et initialiser l'objet <code>GasStation</code> du SDK :</p>
<pre><code class="language-ts">import { GasStation } from '@marigold-dev/gas-station-lib'

const gasApi = new GasStation({
  apiURL: 'https://gas-station-api.marigold.dev/'
})
</code></pre>
<p>Vous pouvez ensuite forger votre operation, par exemple mint un NFT (ici le contrat possède un entrypoint <code>mint_token</code>):</p>
<pre><code class="language-ts">const mintOperation = await contract.methodsObject.mint_token([{
              owner: userAddress,
              token_id: tokenId,
              amount_: 1
          }]).toTransferParams()
</code></pre>
<p>Et enfin, vous pouvez envoyer votre operation à la Gas Station avec :</p>
<pre><code class="language-ts">const response = await gasApi.postOperation(userAddress, {
            destination: mintOperation.to,
            parameters: mintOperation.parameter
          });
</code></pre>
<h3 id="unity"><a class="header" href="#unity">Unity</a></h3>
<p>🚧 Work in Progress 🚧</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="WEBAPP.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="API.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="WEBAPP.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="API.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
